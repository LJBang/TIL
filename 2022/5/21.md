# 22.05.21
## 네트워크
### 3계층(네트워크 계층)
다른 네트워크 대역을 연결시켜주는 역할.  
즉 멀리 떨어진 곳에 존재하는 네트워크까지 데이터 전달을 제어하는 역할  
IP주소를 이용해서 통신.  
- IPv4: 현재 PC에 할당된 IP주소
- 서브넷 마스크: IP주소에 대한 네트워크 대역을 규정
- 게이트웨이: 외부와 통신할 때 사용하는 네트워크 출입구  

#### IP주소(IPv4)
- 초창기 IP주소는 대역별로 클래스를 나누어 사용함. -> 낭비가 심하다.  
- 서브넷 마스크를 두어서 네트워크 대역을 구분하고, 이후에 PC를 구분한다. -> 그래도 조금의 낭비  
- 공인 IP: 네트워크 통신에 사용하는 주소  
- 사설 IP: 같은 네트워크 대역에서 사용하는 IP주소  
개인은 사설 IP를 갖고, 이를 공인 IP로 바꿔서 네트워크에 연결한다.  
NAT: 사설IP를 공인IP로 바꿔준다.  

#### 3계층의 프로토콜
- ARP 프로토콜
- IPv4 프로토콜
- ICMP 프로토콜

#### ARP 프로토콜
IP주소를 이용해 MAC주소를 알아오는 프로토콜  
- 2계층 프로토콜의 타입 (이더넷, 0001)
- IPv4 프로토콜의 타입 (0800)
- 맥주소의 길이 (06)
- IPv4주소 길이 (04)
- Opcode : MAC주소를 요청하는지 응답하는지 구분 (0001, 0002)  
- 출발지의 맥 주소, IP 주소
- 도착지의 MAC 주소, IP 주소  

위 형태로 구성되어있다.  

- 요청시에는 목적지의 MAC주소를 알 수 없기 때문에, 0으로 초기화해서 보낸다.  
- 위 경우 이더넷 프로토콜의 도착지 mac주소는 1로 채운다 -> 같은 네트워크 안의 모두에게 보낸다.  
- 요청을 받은 기기 중 IP주소가 맞다면 응답을 보내준다.  
- 요청을 보낸 기기 A는 응답을 받으면 IP와 MAC주소를 ARP 캐시 테이블에 저장한다.  
